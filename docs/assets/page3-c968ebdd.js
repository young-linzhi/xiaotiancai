import{E as I}from"./base-84a34c6e.js";import{a as u,E as r,b as y,c as E,d as z,e as F,f as S,g as v,h as U}from"./axios-996aca16.js";import"./el-popper-cd5883f2.js";/* empty css                */import{E as N}from"./el-button-53302f5f.js";import{_ as $,d as D,O as _,o as L,c as W,a as o,w as t,f as g,F as q,b as p}from"./index-714ccf26.js";import"./index-fb735ca0.js";const B=D({data(){return{save:!0,page:1,totaldata:10,lex:0,dialogFormVisible:!1,records:[],record:{id:0,couponId:0,productId:0,productName:"",productSn:""}}},methods:{getpage(e,a){const c=this;u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-product-relation/page",data:{current:e,size:a}}).then(function(m){console.log(m),c.records=m.data.data.page.records,c.totaldata=m.data.data.page.total})},jumper(){this.getpage(this.page,5)},Demandeupdate(){u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-product-relation/edit",data:this.record}).then(function(e){e.data.success?r({message:"�����ɹ�.",type:"success"}):r({message:"����ʧ��",type:"error"})})},Demanderemove(e){u({method:"get",url:"http://mall.qzimp.cn/mall/sms-coupon-product-relation/del/"+e}).then(function(a){console.log(a.data.success),a.data.success?r({message:"�����ɹ�.",type:"success"}):r({message:"����ʧ��",type:"error"})})},Demandeadd(){u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-product-relation/add",data:this.record}).then(function(e){e.data.success?r({message:"�����ɹ�.",type:"success"}):r({message:"����ʧ��",type:"error"})})},update(e,a){this.lex=e,e==0?this.record=a:this.record={id:0,couponId:0,productId:0,productName:"",productSn:""},this.dialogFormVisible=!this.dialogFormVisible},planeok(){this.lex==0?this.Demandeupdate():this.Demandeadd(),this.dialogFormVisible=!this.dialogFormVisible,location.reload(),this.$router.go(0)},planeno(){this.dialogFormVisible=!this.dialogFormVisible},remove(e){this.Demanderemove(e.id),location.reload(),this.$router.go(0)}},mounted(){this.getpage(this.page,10)}}),j={class:"demo-pagination-block"},P=g("div",{class:"demonstration"},"Jump to",-1),T={class:"dialog-footer"};function O(e,a,c,m,J,M){const d=F,n=N,f=y,h=_("Upload"),b=I,V=E,i=S,s=v,C=U,w=z;return L(),W(q,null,[o(f,{data:e.records,style:{width:"100%"}},{default:t(()=>[o(d,{prop:"id",label:"id",width:"80"}),o(d,{prop:"couponId",label:"couponId",width:"80"}),o(d,{prop:"productId",label:"productId",width:"80"}),o(d,{prop:"productName",label:"productName",width:"800"}),o(d,{prop:"productSn",label:"productSn",width:"180"}),o(d,{fixed:"right",label:"Operations",width:"340"},{default:t(l=>[o(n,{type:"primary",plain:"",onClick:k=>e.update(0,l.row)},{default:t(()=>[p("Primary")]),_:2},1032,["onClick"]),o(n,{type:"danger",plain:"",onClick:k=>e.remove(l.row)},{default:t(()=>[p("Danger")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(n,{type:"primary"},{default:t(()=>[p("Upload"),o(b,{class:"el-icon--right",onClick:a[0]||(a[0]=l=>e.update(1,0))},{default:t(()=>[o(h)]),_:1})]),_:1}),g("div",j,[P,o(V,{"current-page":e.page,"onUpdate:currentPage":a[1]||(a[1]=l=>e.page=l),"page-size":e.pageSize3,"onUpdate:pageSize":a[2]||(a[2]=l=>e.pageSize3=l),small:e.small,disabled:e.disabled,background:e.background,layout:"prev, pager, next, jumper",total:e.totaldata,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,onClick:e.jumper},null,8,["current-page","page-size","small","disabled","background","total","onSizeChange","onCurrentChange","onClick"])]),o(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=l=>e.dialogFormVisible=l),title:"update"},{footer:t(()=>[g("span",T,[o(n,{onClick:e.planeno},{default:t(()=>[p("Cancel")]),_:1},8,["onClick"]),o(n,{type:"primary",onClick:e.planeok},{default:t(()=>[p(" Confirm ")]),_:1},8,["onClick"])])]),default:t(()=>[o(C,{model:e.record},{default:t(()=>[o(s,{label:"id","label-width":e.formLabelWidth},{default:t(()=>[o(i,{modelValue:e.record.id,"onUpdate:modelValue":a[3]||(a[3]=l=>e.record.id=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"couponId","label-width":e.formLabelWidth},{default:t(()=>[o(i,{modelValue:e.record.couponId,"onUpdate:modelValue":a[4]||(a[4]=l=>e.record.couponId=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"productId","label-width":e.formLabelWidth},{default:t(()=>[o(i,{modelValue:e.record.productId,"onUpdate:modelValue":a[5]||(a[5]=l=>e.record.productId=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"productName","label-width":e.formLabelWidth},{default:t(()=>[o(i,{modelValue:e.record.productName,"onUpdate:modelValue":a[6]||(a[6]=l=>e.record.productName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"productSn","label-width":e.formLabelWidth},{default:t(()=>[o(i,{modelValue:e.record.productSn,"onUpdate:modelValue":a[7]||(a[7]=l=>e.record.productSn=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=$(B,[["render",O]]);export{Y as default};
