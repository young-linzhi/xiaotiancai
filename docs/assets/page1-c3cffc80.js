import"./base-84a34c6e.js";import{a as u,E as m,b as C,c as k,d as y,e as T,f as I,g as S,h as z}from"./axios-996aca16.js";import"./el-popper-cd5883f2.js";import{E as U}from"./el-button-53302f5f.js";import{_ as F,d as v,o as E,c as L,a as l,w as d,f,F as W,b as s}from"./index-714ccf26.js";import"./index-fb735ca0.js";const N=v({data(){return{lex:0,save:!0,dialogFormVisible:!1,page:1,totaldata:10,records:[],record:{id:0,couponId:0,memberId:0,couponCode:"",memberNickname:"",getType:1,createTime:"0",useStatus:0,useTime:"0",orderId:null,orderSn:null}}},methods:{getpage(e,o){const p=this;u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-history/page",data:{current:e,size:o}}).then(function(b){p.records=b.data.data.page.records,p.totaldata=b.data.data.page.total})},jumper(){this.getpage(this.page,5)},Demandeupdate(){u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-history/edit",data:this.record}).then(function(e){e.data.success?m({message:"操作成功.",type:"success"}):m({message:"操作失败",type:"error"})})},Demanderemove(e){u({method:"get",url:"http://mall.qzimp.cn/mall/sms-coupon-history/del/"+e}).then(function(o){console.log(o.data.success),o.data.success?m({message:"操作成功.",type:"success"}):m({message:"操作失败",type:"error"})})},Demandeadd(){u({method:"post",url:"http://mall.qzimp.cn/mall/sms-coupon-history/add",data:this.record}).then(function(e){e.data.success?m({message:"操作成功.",type:"success"}):m({message:"操作失败",type:"error"})})},update(e,o){this.lex=e,e==0?this.record=o:this.record={id:0,couponId:0,memberId:0,couponCode:"",memberNickname:"",getType:1,createTime:"0",useStatus:0,useTime:"0",orderId:null,orderSn:null},this.dialogFormVisible=!this.dialogFormVisible},planeok(){this.lex==0?this.Demandeupdate():this.Demandeadd(),this.dialogFormVisible=!this.dialogFormVisible,location.reload(),this.$router.go(0)},planeno(){this.dialogFormVisible=!this.dialogFormVisible},remove(e){this.Demanderemove(e.id),location.reload(),this.$router.go(0)}},mounted(){this.getpage(this.page,10)}}),$={class:"demo-pagination-block"},D=f("div",{class:"demonstration"},"Jump to",-1),q={class:"dialog-footer"};function B(e,o,p,b,j,P){const t=T,n=U,h=C,g=k,r=I,i=S,V=z,c=y;return E(),L(W,null,[l(h,{data:e.records,style:{width:"100%"}},{default:d(()=>[l(t,{prop:"id",label:"id",width:"80"}),l(t,{prop:"couponId",label:"couponId",width:"80"}),l(t,{prop:"memberId",label:"memberId",width:"80"}),l(t,{prop:"couponCode",label:"couponCode",width:"180"}),l(t,{prop:"memberNickname",label:"memberNickname",width:"80"}),l(t,{prop:"getType",label:"getType",width:"80"}),l(t,{prop:"createTime",label:"createTime",width:"200"}),l(t,{prop:"useStatus",label:"useStatus",width:"60"}),l(t,{prop:"useTime",label:"useTime",width:"250"}),l(t,{prop:"orderId",label:"orderId",width:"70"}),l(t,{prop:"orderSn",label:"orderSn",width:"70"}),l(t,{fixed:"right",label:"Operations",width:"150"},{default:d(a=>[l(n,{link:"",type:"primary",size:"small",onClick:w=>e.update(0,a.row)},{default:d(()=>[s("update")]),_:2},1032,["onClick"]),l(n,{link:"",type:"primary",size:"small",onClick:w=>e.remove(a.row)},{default:d(()=>[s("remove")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(n,{type:"primary",onClick:o[0]||(o[0]=a=>e.update(1,0))},{default:d(()=>[s("add")]),_:1}),f("div",$,[D,l(g,{"current-page":e.page,"onUpdate:currentPage":o[1]||(o[1]=a=>e.page=a),"page-size":e.pageSize3,"onUpdate:pageSize":o[2]||(o[2]=a=>e.pageSize3=a),small:e.small,disabled:e.disabled,background:e.background,layout:"prev, pager, next, jumper",total:e.totaldata,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,onClick:e.jumper},null,8,["current-page","page-size","small","disabled","background","total","onSizeChange","onCurrentChange","onClick"])]),l(c,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[14]||(o[14]=a=>e.dialogFormVisible=a),title:"update"},{footer:d(()=>[f("span",q,[l(n,{onClick:e.planeno},{default:d(()=>[s("Cancel")]),_:1},8,["onClick"]),l(n,{type:"primary",onClick:e.planeok},{default:d(()=>[s(" Confirm ")]),_:1},8,["onClick"])])]),default:d(()=>[l(V,{model:e.record},{default:d(()=>[l(i,{label:"id","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.id,"onUpdate:modelValue":o[3]||(o[3]=a=>e.record.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"couponId","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.couponId,"onUpdate:modelValue":o[4]||(o[4]=a=>e.record.couponId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"memberId","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.memberId,"onUpdate:modelValue":o[5]||(o[5]=a=>e.record.memberId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"couponCode","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.couponCode,"onUpdate:modelValue":o[6]||(o[6]=a=>e.record.couponCode=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"memberNickname","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.memberNickname,"onUpdate:modelValue":o[7]||(o[7]=a=>e.record.memberNickname=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"getType","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.getType,"onUpdate:modelValue":o[8]||(o[8]=a=>e.record.getType=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"createTime","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.createTime,"onUpdate:modelValue":o[9]||(o[9]=a=>e.record.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"useStatus","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.useStatus,"onUpdate:modelValue":o[10]||(o[10]=a=>e.record.useStatus=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"useTime","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.useTime,"onUpdate:modelValue":o[11]||(o[11]=a=>e.record.useTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"orderId","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.orderId,"onUpdate:modelValue":o[12]||(o[12]=a=>e.record.orderId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"orderSn","label-width":e.formLabelWidth},{default:d(()=>[l(r,{modelValue:e.record.orderSn,"onUpdate:modelValue":o[13]||(o[13]=a=>e.record.orderSn=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const K=F(N,[["render",B]]);export{K as default};
